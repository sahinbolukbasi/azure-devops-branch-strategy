# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Business Central CI/CD Pipeline - FAST BUILD
# Branch Strategy: feature/* â†’ sandbox â†’ release â†’ main
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                           HIZLI DERLEME                                    â•‘
# â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
# â•‘                                                                           â•‘
# â•‘  Bu pipeline CompileApp.ps1 kullanmadan doÄŸrudan AL Compiler (alc.exe)    â•‘
# â•‘  ile hÄ±zlÄ± derleme yapar. Symbol cache kullanarak derleme sÃ¼resini        â•‘
# â•‘  minimize eder.                                                           â•‘
# â•‘                                                                           â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                           BRANCH KURALLARI                                 â•‘
# â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
# â•‘                                                                           â•‘
# â•‘  SANDBOX â† feature/* ONLY                                                 â•‘
# â•‘     â€¢ Sadece feature branch'lerden PR kabul eder                          â•‘
# â•‘     â€¢ Build YOK (sadece validation)                                       â•‘
# â•‘                                                                           â•‘
# â•‘  RELEASE â† sandbox, bugfix/* ONLY                                         â•‘
# â•‘     â€¢ Sandbox veya bugfix branch'lerden PR kabul eder                     â•‘
# â•‘     â€¢ Merge sonrasÄ± FAST BUILD Ã§alÄ±ÅŸÄ±r                                    â•‘
# â•‘     â€¢ Bugfix merge â†’ Sandbox'a otomatik back-merge                        â•‘
# â•‘                                                                           â•‘
# â•‘  MAIN â† release, hotfix/* ONLY                                            â•‘
# â•‘     â€¢ Release veya hotfix branch'lerden PR kabul eder                     â•‘
# â•‘     â€¢ Merge sonrasÄ± FAST BUILD Ã§alÄ±ÅŸÄ±r                                    â•‘
# â•‘     â€¢ Hotfix merge â†’ Release ve Sandbox'a otomatik back-merge             â•‘
# â•‘                                                                           â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

trigger:
  branches:
    include:
      - main
      - release
      - sandbox

pr:
  branches:
    include:
      - main
      - release
      - sandbox

variables:
  # PR Detection
  isPR: $[eq(variables['Build.Reason'], 'PullRequest')]

  # Branch Detection (Merge sonrasÄ±)
  isMain: $[eq(variables['Build.SourceBranch'], 'refs/heads/main')]
  isRelease: $[eq(variables['Build.SourceBranch'], 'refs/heads/release')]
  isSandbox: $[eq(variables['Build.SourceBranch'], 'refs/heads/sandbox')]

  # Build Configuration
  buildConfiguration: "Release"

pool:
  vmImage: windows-latest

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STAGES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

stages:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # STAGE 1: PR VALIDATION
  # TÃ¼m PR'larda Ã§alÄ±ÅŸÄ±r - YanlÄ±ÅŸ branch'ten PR'Ä± ENGELLER
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - stage: Validate
    displayName: "ğŸ” PR Validation"
    condition: eq(variables.isPR, true)
    jobs:
      - job: ValidateBranchRules
        displayName: "Branch Rules Check"
        steps:
          - checkout: none

          - powershell: |
              # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              # Branch Validation Script
              # YanlÄ±ÅŸ PR'larÄ± engelleyerek geliÅŸtiricilerin hata yapmasÄ±nÄ± Ã¶nler
              # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

              $sourceBranch = "$(System.PullRequest.SourceBranch)" -replace "refs/heads/", ""
              $targetBranch = "$(System.PullRequest.TargetBranch)" -replace "refs/heads/", ""

              Write-Host ""
              Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
              Write-Host "                    ğŸ” PR VALIDATION                          "
              Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
              Write-Host ""
              Write-Host "  ğŸ“¤ Kaynak Branch : $sourceBranch"
              Write-Host "  ğŸ“¥ Hedef Branch  : $targetBranch"
              Write-Host ""

              $valid = $false
              $willBuildAfterMerge = $false
              $willBackMerge = $false
              $backMergeTarget = ""
              $errorMessage = ""

              switch ($targetBranch) {
                  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                  # SANDBOX BRANCH RULES
                  # Sadece feature/* kabul edilir
                  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                  "sandbox" {
                      if ($sourceBranch -like "feature/*") {
                          $valid = $true
                          $willBuildAfterMerge = $false
                          Write-Host "  âœ… GeÃ§erli: feature/* â†’ sandbox"
                          Write-Host ""
                          Write-Host "  â„¹ï¸  Bu merge sonrasÄ± BUILD yapÄ±lmayacak."
                          Write-Host "      Kod sandbox'ta test edilecek."
                      }
                      else {
                          $errorMessage = @"

                                            â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                            â•‘             âŒ SANDBOX BRANCH KURALI Ä°HLALÄ°!                      â•‘
                                            â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
                                            â•‘                                                                   â•‘
                                            â•‘  Sandbox branch'e SADECE feature/* branch'lerden PR aÃ§Ä±labilir!   â•‘
                                            â•‘                                                                   â•‘
                                            â•‘  âœ… Ä°ZÄ°N VERÄ°LEN:                                                 â•‘
                                            â•‘     â€¢ feature/*  â†’ Yeni Ã¶zellik geliÅŸtirmeleri                    â•‘
                                            â•‘                                                                   â•‘
                                            â•‘  âŒ SÄ°ZÄ°N BRANCH:                                                  â•‘
                                            â•‘     â€¢ $sourceBranch
                                            â•‘                                                                   â•‘
                                            â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                          "@
                      }
                  }
                  
                  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                  # RELEASE BRANCH RULES
                  # Sadece sandbox veya bugfix/* kabul edilir
                  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                  "release" {
                      if ($sourceBranch -eq "sandbox") {
                          $valid = $true
                          $willBuildAfterMerge = $true
                          Write-Host "  âœ… GeÃ§erli: sandbox â†’ release"
                          cccc
                          Write-Host "  ğŸ“¦ Bu merge sonrasÄ± FAST BUILD Ã§alÄ±ÅŸacak."
                      }
                      elseif ($sourceBranch -like "bugfix/*") {
                          $valid = $true
                          $willBuildAfterMerge = $true
                          $willBackMerge = $true
                          $backMergeTarget = "sandbox"
                          Write-Host "  âœ… GeÃ§erli: bugfix/* â†’ release"
                          Write-Host ""
                          Write-Host "  ğŸ“¦ Bu merge sonrasÄ± FAST BUILD Ã§alÄ±ÅŸacak."
                          Write-Host "  ğŸ”„ Otomatik back-merge: release â†’ sandbox"
                      }
                      else {
                          $errorMessage = @"

                                            â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                            â•‘             âŒ RELEASE BRANCH KURALI Ä°HLALÄ°!                       â•‘
                                            â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
                                            â•‘                                                                   â•‘
                                            â•‘  Release branch'e SADECE ÅŸu kaynaklardan PR aÃ§Ä±labilir:            â•‘
                                            â•‘                                                                   â•‘
                                            â•‘  âœ… Ä°ZÄ°N VERÄ°LEN:                                                  â•‘
                                            â•‘     â€¢ sandbox   â†’ Normal geliÅŸtirme akÄ±ÅŸÄ±                         â•‘
                                            â•‘     â€¢ bugfix/*  â†’ Release ortamÄ± hata dÃ¼zeltmeleri                â•‘
                                            â•‘                                                                   â•‘
                                            â•‘  âŒ SÄ°ZÄ°N BRANCH:                                                  â•‘
                                            â•‘     â€¢ $sourceBranch
                                            â•‘                                                                   â•‘
                                            â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                          "@
                      }
                  }
                  
                  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                  # MAIN BRANCH RULES
                  # Sadece release veya hotfix/* kabul edilir
                  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                  "main" {
                      if ($sourceBranch -eq "release") {
                          $valid = $true
                          $willBuildAfterMerge = $true
                          Write-Host "  âœ… GeÃ§erli: release â†’ main"
                          Write-Host ""
                          Write-Host "  ğŸ“¦ Bu merge sonrasÄ± FAST BUILD Ã§alÄ±ÅŸacak."
                          Write-Host "  ğŸŒŸ Production-ready kod!"
                      }
                      elseif ($sourceBranch -like "hotfix/*") {
                          $valid = $true
                          $willBuildAfterMerge = $true
                          $willBackMerge = $true
                          $backMergeTarget = "release ve sandbox"
                          Write-Host "  âœ… GeÃ§erli: hotfix/* â†’ main"
                          Write-Host ""
                          Write-Host "  ğŸ“¦ Bu merge sonrasÄ± FAST BUILD Ã§alÄ±ÅŸacak."
                          Write-Host "  ğŸ”„ Otomatik back-merge: main â†’ release â†’ sandbox"
                          Write-Host "  ğŸ”¥ Acil dÃ¼zeltme modu!"
                      }
                      else {
                          $errorMessage = @"

                                          â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                          â•‘               âŒ MAIN BRANCH KURALI Ä°HLALÄ°!                        â•‘
                                          â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
                                          â•‘                                                                   â•‘
                                          â•‘  Main branch'e SADECE ÅŸu kaynaklardan PR aÃ§Ä±labilir:              â•‘
                                          â•‘                                                                   â•‘
                                          â•‘  âœ… Ä°ZÄ°N VERÄ°LEN:                                                  â•‘
                                          â•‘     â€¢ release   â†’ Normal release akÄ±ÅŸÄ±                            â•‘
                                          â•‘     â€¢ hotfix/*  â†’ Acil canlÄ± dÃ¼zeltmeleri                         â•‘
                                          â•‘                                                                   â•‘
                                          â•‘  âŒ SÄ°ZÄ°N BRANCH:                                                   â•‘
                                          â•‘     â€¢ $sourceBranch
                                          â•‘                                                                   â•‘
                                          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                        "@
                      }
                  }
                  
                  default {
                      $errorMessage = @"

                                      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                      â•‘               âŒ GEÃ‡ERSÄ°Z HEDEF BRANCH!                             â•‘
                                      â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
                                      â•‘                                                                   â•‘
                                      â•‘  '$targetBranch' branch'i iÃ§in PR kuralÄ± tanÄ±mlanmamÄ±ÅŸ.
                                      â•‘                                                                   â•‘
                                      â•‘  Sadece ÅŸu branch'lere PR aÃ§Ä±labilir:                             â•‘
                                      â•‘     â€¢ sandbox                                                     â•‘
                                      â•‘     â€¢ release                                                     â•‘
                                      â•‘     â€¢ main                                                        â•‘
                                      â•‘                                                                   â•‘
                                      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    "@
                  }
              }

              # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              # SonuÃ§
              # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              Write-Host ""

              if ($valid) {
                  Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                  Write-Host "  âœ… PR VALIDATION BAÅARILI"
                  Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                  Write-Host ""
                  Write-Host "  $sourceBranch â†’ $targetBranch"
                  Write-Host ""
                  
                  if ($willBuildAfterMerge) {
                      Write-Host "  ğŸ“¦ Merge sonrasÄ±: FAST BUILD"
                  }
                  if ($willBackMerge) {
                      Write-Host "  ğŸ”„ Merge sonrasÄ±: Back-merge â†’ $backMergeTarget"
                  }
                  if (-not $willBuildAfterMerge -and -not $willBackMerge) {
                      Write-Host "  âš¡ Merge sonrasÄ±: Sadece kod birleÅŸtirilecek"
                  }
                  
                  Write-Host ""
                  Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
              } else {
                  Write-Host "##[error]$errorMessage"
                  exit 1
              }
            displayName: "ğŸ” Validate Branch Rules"
            failOnStderr: true

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # STAGE 2: FAST BUILD - RELEASE BRANCH
  # sandbox â†’ release veya bugfix/* â†’ release merge sonrasÄ±
  # CompileApp.ps1 KULLANMADAN doÄŸrudan AL Compiler ile hÄ±zlÄ± derleme
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - stage: FastBuildRelease
    displayName: "âš¡ Fast Build (Release)"
    condition: |
      and(
        succeeded(),
        ne(variables.isPR, true),
        eq(variables.isRelease, true)
      )
    jobs:
      - job: QuickCompileApp
        displayName: "Quick Compile AL Application"
        timeoutInMinutes: 30
        steps:
          - checkout: self
            clean: true
            fetchDepth: 1

          # Symbol Cache - Derleme sÃ¼resini azaltÄ±r
          - task: Cache@2
            displayName: "ğŸ“¦ Cache AL Symbols"
            inputs:
              key: 'alpackages | "$(Agent.OS)" | app.json'
              path: "./.alpackages"
              cacheHitVar: SYMBOLS_CACHE_HIT

          # AL Compiler Ä°ndir ve Ã‡Ä±kar
          - task: PowerShell@2
            displayName: "â¬‡ï¸ Download & Extract AL Compiler"
            inputs:
              targetType: "inline"
              script: |
                Write-Host ""
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host "                    â¬‡ï¸ AL COMPILER DOWNLOAD                     "
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host ""

                $vsixUrl = "https://marketplace.visualstudio.com/_apis/public/gallery/publishers/ms-dynamics-smb/vsextensions/al/latest/vspackage"
                $vsixPath = "$(Build.BinariesDirectory)\al.zip"
                $extractPath = "$(Build.BinariesDirectory)\extension"

                Write-Host "  ğŸ“¥ AL Language Extension indiriliyor..."
                Invoke-WebRequest -Uri $vsixUrl -OutFile $vsixPath

                Write-Host "  ğŸ“¦ Compiler Ã§Ä±karÄ±lÄ±yor..."
                Expand-Archive -Path $vsixPath -DestinationPath $extractPath -Force

                $alc = Get-ChildItem -Path $extractPath -Filter alc.exe -Recurse | Select-Object -First 1
                Write-Host "##vso[task.setvariable variable=alcPath]$($alc.FullName)"
                Write-Host ""
                Write-Host "  âœ… Compiler bulundu: $($alc.FullName)"
                Write-Host ""
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

          # HÄ±zlÄ± Derleme
          - task: PowerShell@2
            displayName: "âš¡ Quick Compile AL"
            inputs:
              targetType: "inline"
              script: |
                Write-Host ""
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host "                    âš¡ FAST BUILD - RELEASE                     "
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host ""
                Write-Host "  ğŸ“Œ Branch      : release"
                Write-Host "  ğŸ“Œ Build       : $(Build.BuildNumber)"
                Write-Host "  ğŸ“Œ Commit      : $(Build.SourceVersion)"
                Write-Host "  ğŸ“Œ Mod         : HÄ±zlÄ± Derleme (CompileApp.ps1 YOK)"
                Write-Host ""

                $app = Get-Content "app.json" | ConvertFrom-Json
                $outPath = "$(Build.ArtifactStagingDirectory)\$($app.publisher)_$($app.name)_$($app.version).app"

                Write-Host "  ğŸ“¦ Derleniyor: $($app.name) v$($app.version)"
                Write-Host "  ğŸ“¤ Ã‡Ä±ktÄ±     : $outPath"
                Write-Host ""

                # AL Compiler ile doÄŸrudan derleme
                & "$(alcPath)" /project:$(Build.SourcesDirectory) /packagecachepath:$(Build.SourcesDirectory)/.alpackages /out:$outPath

                if ($LASTEXITCODE -ne 0) { 
                    Write-Host ""
                    Write-Host "  ##[error]âŒ Derleme baÅŸarÄ±sÄ±z! (Exit Code: $LASTEXITCODE)"
                    exit 1 
                }

                Write-Host ""
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host "  ##[section]âœ… App derlendi - HÄ±zlÄ± mod!"
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
              workingDirectory: $(Build.SourcesDirectory)

          # Artifact YayÄ±nla
          - task: PublishBuildArtifacts@1
            displayName: "ğŸ“¤ Publish Artifact"
            inputs:
              PathtoPublish: "$(Build.ArtifactStagingDirectory)"
              ArtifactName: "release-$(Build.BuildNumber)"
              publishLocation: "Container"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # STAGE 3: FAST BUILD - MAIN BRANCH
  # release â†’ main veya hotfix/* â†’ main merge sonrasÄ±
  # CompileApp.ps1 KULLANMADAN doÄŸrudan AL Compiler ile hÄ±zlÄ± derleme
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - stage: FastBuildMain
    displayName: "âš¡ Fast Build (Main)"
    condition: |
      and(
        succeeded(),
        ne(variables.isPR, true),
        eq(variables.isMain, true)
      )
    jobs:
      - job: QuickCompileApp
        displayName: "Quick Compile AL Application"
        timeoutInMinutes: 30
        steps:
          - checkout: self
            clean: true
            fetchDepth: 1

          # Symbol Cache
          - task: Cache@2
            displayName: "ğŸ“¦ Cache AL Symbols"
            inputs:
              key: 'alpackages | "$(Agent.OS)" | app.json'
              path: "./.alpackages"
              cacheHitVar: SYMBOLS_CACHE_HIT

          # AL Compiler Ä°ndir
          - task: PowerShell@2
            displayName: "â¬‡ï¸ Download & Extract AL Compiler"
            inputs:
              targetType: "inline"
              script: |
                Write-Host ""
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host "                    â¬‡ï¸ AL COMPILER DOWNLOAD                     "
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host ""

                $vsixUrl = "https://marketplace.visualstudio.com/_apis/public/gallery/publishers/ms-dynamics-smb/vsextensions/al/latest/vspackage"
                $vsixPath = "$(Build.BinariesDirectory)\al.zip"
                $extractPath = "$(Build.BinariesDirectory)\extension"

                Write-Host "  ğŸ“¥ AL Language Extension indiriliyor..."
                Invoke-WebRequest -Uri $vsixUrl -OutFile $vsixPath

                Write-Host "  ğŸ“¦ Compiler Ã§Ä±karÄ±lÄ±yor..."
                Expand-Archive -Path $vsixPath -DestinationPath $extractPath -Force

                $alc = Get-ChildItem -Path $extractPath -Filter alc.exe -Recurse | Select-Object -First 1
                Write-Host "##vso[task.setvariable variable=alcPath]$($alc.FullName)"
                Write-Host ""
                Write-Host "  âœ… Compiler bulundu: $($alc.FullName)"
                Write-Host ""
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

          # HÄ±zlÄ± Derleme - Production
          - task: PowerShell@2
            displayName: "âš¡ Quick Compile AL (Production)"
            inputs:
              targetType: "inline"
              script: |
                Write-Host ""
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host "                    ğŸŒŸ FAST BUILD - PRODUCTION                  "
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host ""
                Write-Host "  ğŸ“Œ Branch      : main"
                Write-Host "  ğŸ“Œ Build       : $(Build.BuildNumber)"
                Write-Host "  ğŸ“Œ Commit      : $(Build.SourceVersion)"
                Write-Host "  ğŸ“Œ Mod         : HÄ±zlÄ± Derleme (CompileApp.ps1 YOK)"
                Write-Host ""

                $app = Get-Content "app.json" | ConvertFrom-Json
                $outPath = "$(Build.ArtifactStagingDirectory)\$($app.publisher)_$($app.name)_$($app.version).app"

                Write-Host "  ğŸ“¦ Derleniyor: $($app.name) v$($app.version)"
                Write-Host "  ğŸ“¤ Ã‡Ä±ktÄ±     : $outPath"
                Write-Host ""

                # AL Compiler ile doÄŸrudan derleme
                & "$(alcPath)" /project:$(Build.SourcesDirectory) /packagecachepath:$(Build.SourcesDirectory)/.alpackages /out:$outPath

                if ($LASTEXITCODE -ne 0) { 
                    Write-Host ""
                    Write-Host "  ##[error]âŒ Derleme baÅŸarÄ±sÄ±z! (Exit Code: $LASTEXITCODE)"
                    exit 1 
                }

                Write-Host ""
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                Write-Host "  ##[section]âœ… Production app derlendi - HÄ±zlÄ± mod!"
                Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
              workingDirectory: $(Build.SourcesDirectory)

          # Artifact YayÄ±nla
          - task: PublishBuildArtifacts@1
            displayName: "ğŸ“¤ Publish Artifact"
            inputs:
              PathtoPublish: "$(Build.ArtifactStagingDirectory)"
              ArtifactName: "production-$(Build.BuildNumber)"
              publishLocation: "Container"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # STAGE 4: BACK-MERGE (Release â†’ Sandbox)
  # Bugfix merge sonrasÄ± sandbox'Ä± gÃ¼ncelle
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - stage: BackMergeToSandbox
    displayName: "ğŸ”„ Sync: Release â†’ Sandbox"
    dependsOn: FastBuildRelease
    condition: |
      and(
        succeeded(),
        eq(variables.isRelease, true)
      )
    jobs:
      - job: SyncSandbox
        displayName: "Back-merge to Sandbox"
        steps:
          - checkout: self
            persistCredentials: true
            fetchDepth: 0

          - powershell: |
              Write-Host ""
              Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
              Write-Host "              ğŸ”„ RELEASE â†’ SANDBOX SYNC                       "
              Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
              Write-Host ""

              git config user.email "devops-bot@yourcompany.com"
              git config user.name "DevOps Bot"
              git fetch origin --prune

              Write-Host "  ğŸ“Œ Release'deki deÄŸiÅŸiklikler sandbox'a aktarÄ±lÄ±yor..."
              Write-Host ""

              git checkout sandbox 2>&1
              if ($LASTEXITCODE -ne 0) {
                  Write-Host "  ##[error]Sandbox branch'e geÃ§ilemedi!"
                  exit 1
              }

              git pull origin sandbox --no-edit 2>&1

              $mergeResult = git merge origin/release -m "[skip ci] ğŸ”„ Auto-sync: Release â†’ Sandbox (bugfix/feature merge)" --no-edit 2>&1

              if ($LASTEXITCODE -ne 0) {
                  Write-Host ""
                  Write-Host "  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
                  Write-Host "  â•‘  âš ï¸ CONFLICT DETECTED: Release â†’ Sandbox                  â•‘"
                  Write-Host "  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
                  Write-Host "  â•‘                                                           â•‘"
                  Write-Host "  â•‘  Manuel Ã§Ã¶zÃ¼m gerekiyor:                                   â•‘"
                  Write-Host "  â•‘                                                           â•‘"
                  Write-Host "  â•‘  1. git checkout sandbox                                  â•‘"
                  Write-Host "  â•‘  2. git pull origin sandbox                               â•‘"
                  Write-Host "  â•‘  3. git merge origin/release                              â•‘"
                  Write-Host "  â•‘  4. Conflict'leri Ã§Ã¶zÃ¼n                                   â•‘"
                  Write-Host "  â•‘  5. git add .                                             â•‘"
                  Write-Host "  â•‘  6. git commit -m 'Merge release into sandbox'            â•‘"
                  Write-Host "  â•‘  7. git push origin sandbox                               â•‘"
                  Write-Host "  â•‘                                                           â•‘"
                  Write-Host "  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
                  Write-Host ""
                  
                  git merge --abort 2>&1
                  Write-Host "  ##[warning]Back-merge iptal edildi. Manuel mÃ¼dahale gerekli."
              } else {
                  $pushResult = git push origin sandbox 2>&1
                  
                  if ($LASTEXITCODE -eq 0) {
                      Write-Host "  âœ… Release â†’ Sandbox sync baÅŸarÄ±lÄ±!"
                  } else {
                      Write-Host "  â„¹ï¸ DeÄŸiÅŸiklik yok veya push baÅŸarÄ±sÄ±z."
                  }
              }

              Write-Host ""
              Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
            displayName: "ğŸ”„ Execute Back-Merge"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # STAGE 5: BACK-MERGE (Main â†’ Release â†’ Sandbox)
  # Hotfix merge sonrasÄ± tÃ¼m branch'leri gÃ¼ncelle
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - stage: BackMergeFromMain
    displayName: "ğŸ”„ Sync: Main â†’ Release â†’ Sandbox"
    dependsOn: FastBuildMain
    condition: |
      and(
        succeeded(),
        eq(variables.isMain, true)
      )
    jobs:
      - job: SyncAllBranches
        displayName: "Back-merge to Release & Sandbox"
        steps:
          - checkout: self
            persistCredentials: true
            fetchDepth: 0

          - powershell: |
              Write-Host ""
              Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
              Write-Host "              ğŸ”„ MAIN â†’ RELEASE â†’ SANDBOX SYNC                "
              Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
              Write-Host ""

              git config user.email "devops-bot@yourcompany.com"
              git config user.name "DevOps Bot"
              git fetch origin --prune

              $hasError = $false

              # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              # ADIM 1: Main â†’ Release
              # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
              Write-Host "  ğŸ“Œ ADIM 1: Main â†’ Release"
              Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
              Write-Host ""

              git checkout release 2>&1
              git pull origin release --no-edit 2>&1

              $mergeResult = git merge origin/main -m "[skip ci] ğŸ”„ Auto-sync: Main â†’ Release (hotfix/release merge)" --no-edit 2>&1

              if ($LASTEXITCODE -ne 0) {
                  Write-Host "  ##[warning]âŒ CONFLICT: Main â†’ Release"
                  Write-Host "  Manuel Ã§Ã¶zÃ¼m gerekiyor!"
                  git merge --abort 2>&1
                  $hasError = $true
              } else {
                  git push origin release 2>&1
                  if ($LASTEXITCODE -eq 0) {
                      Write-Host "  âœ… Main â†’ Release baÅŸarÄ±lÄ±!"
                  } else {
                      Write-Host "  â„¹ï¸ DeÄŸiÅŸiklik yok."
                  }
              }

              # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              # ADIM 2: Release â†’ Sandbox
              # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              Write-Host ""
              Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
              Write-Host "  ğŸ“Œ ADIM 2: Release â†’ Sandbox"
              Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
              Write-Host ""

              git checkout sandbox 2>&1
              git pull origin sandbox --no-edit 2>&1

              $mergeResult = git merge origin/release -m "[skip ci] ğŸ”„ Auto-sync: Release â†’ Sandbox (from main)" --no-edit 2>&1

              if ($LASTEXITCODE -ne 0) {
                  Write-Host "  ##[warning]âŒ CONFLICT: Release â†’ Sandbox"
                  Write-Host "  Manuel Ã§Ã¶zÃ¼m gerekiyor!"
                  git merge --abort 2>&1
                  $hasError = $true
              } else {
                  git push origin sandbox 2>&1
                  if ($LASTEXITCODE -eq 0) {
                      Write-Host "  âœ… Release â†’ Sandbox baÅŸarÄ±lÄ±!"
                  } else {
                      Write-Host "  â„¹ï¸ DeÄŸiÅŸiklik yok."
                  }
              }

              # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              # SonuÃ§
              # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              Write-Host ""
              Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

              if ($hasError) {
                  Write-Host "  ##[warning]âš ï¸ BACK-MERGE TAMAMLANDI (CONFLICT'LER VAR)"
                  Write-Host ""
                  Write-Host "  LÃ¼tfen conflict'leri manuel olarak Ã§Ã¶zÃ¼n."
              } else {
                  Write-Host "  âœ… TÃœM BRANCH'LER SENKRONÄ°ZE EDÄ°LDÄ°"
                  Write-Host ""
                  Write-Host "  Main â†’ Release â†’ Sandbox âœ“"
              }

              Write-Host "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
            displayName: "ğŸ”„ Execute Back-Merge"
